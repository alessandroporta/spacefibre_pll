; Top Design: "spacefiber_pll_lib:charge_pump_test:schematic"
; Netlisted using Hierarchy Policy: "Standard_ic"

Options ResourceUsage=yes UseNutmegFormat=no EnableOptim=no TopDesignName="spacefiber_pll_lib:charge_pump_test:schematic" DcopOutputNodeVoltages=yes DcopOutputPinCurrents=yes DcopOutputAllSweepPoints=no DcopOutputDcopType=0
simulator lang = spectre
global 0 sub!
simulator lang = ads
; Library Name: spacefiber_pll_lib
; Cell Name: OpAmp
; View Name: schematic
define OpAmp ( Vpos  Vneg  Vout  Vdd  Vss ) 
;parameters 
I_Source:SRC1  Vdd N__28 Type="I_DC" Idc=4 uA 
simulator lang = spectre
global 0 sub!
include "C:/PDK_ADS/sg25h4_students/tech/spectre/mismatch.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerDIO.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/SG25_MOS/library/spectre/cornerMOS_psp.scs" section=tt
include "C:/PDK_ADS/sg25h4_students/tech/SG25H4_HBT/spectre/cornerBIP.scs" section=typ
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerRES.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerCAP.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerRCX.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/statistics.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25H4_parameters.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_passives.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_inductors.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_diodes.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_esd.lib"
X3 (sub! 0) ptap1 R=262.847 l=780n w=780n
N9 (N__28 N__28 Vss sub!) nmos w=2u l=480n ng=2 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N10 (N__16 N__28 Vss sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N11 (N__3 Vpos N__16 sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N12 (Vout Vneg N__16 sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P5 (N__3 N__3 Vdd sub_n) pmos w=40u l=480n ng=40 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P6 (Vout N__3 Vdd sub_n) pmos w=40u l=480n ng=40 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
X5 (Vdd sub_n) ntap1 R=262.847 l=780n w=780n
simulator lang = ads
end OpAmp

; Library Name: ads_rflib
; Cell Name: V_Probe
; View Name: schematic
define V_Probe ( P1 ) 
parameters 
Short:Short1  P1 net Mode=0 SaveCurrent=no 
end V_Probe

; Library Name: spacefiber_pll_lib
; Cell Name: charge_pump
; View Name: schematic
define charge_pump ( Qa  Qa_n  Qb  Qb_n  Vdd  Vd ) 
;parameters 
I_Source:SRC1  Vdd N__74 Type="I_DC" Idc=4 uA 
simulator lang = spectre
X2 (sub! 0) ptap1 R=262.847 l=780n w=780n
global 0 sub!
include "C:/PDK_ADS/sg25h4_students/tech/spectre/mismatch.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerDIO.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/SG25_MOS/library/spectre/cornerMOS_psp.scs" section=tt
include "C:/PDK_ADS/sg25h4_students/tech/SG25H4_HBT/spectre/cornerBIP.scs" section=typ
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerRES.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerCAP.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/cornerRCX.scs" section=11
include "C:/PDK_ADS/sg25h4_students/tech/spectre/statistics.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25H4_parameters.scs"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_passives.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_inductors.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_diodes.lib"
include "C:/PDK_ADS/sg25h4_students/tech/spectre/SG25_esd.lib"
simulator lang = ads
OpAmp:X16  Vd N__44 N__44 Vdd 0 
simulator lang = spectre
N15 (N__51 N__74 0 sub!) nmos w=2u l=480n ng=2 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N16 (N__27 N__74 0 sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N17 (N__74 N__74 0 sub!) nmos w=2u l=480n ng=2 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N18 (Vd Qb N__27 sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
N19 (N__53 Qb_n N__27 sub!) nmos w=20u l=480n ng=20 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P13 (N__51 N__51 Vdd sub_n) pmos w=1u l=480n ng=1 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P15 (N__44 Qa N__48 sub_n) pmos w=10u l=480n ng=10 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P17 (Vd Qa_n N__48 sub_n) pmos w=10u l=480n ng=10 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
P14 (N__48 N__51 Vdd sub_n) pmos w=10u l=480n ng=10 rfmode=0 ad=0 as=0 pd=0 ps=0 m=1
X18 (Vdd sub_n) ntap1 R=262.847 l=780n w=780n
simulator lang = ads
V_Probe:V_Probe1  N__27 
Short:I_Probe1  N__53 N__44 Mode=0 SaveCurrent=yes 
end charge_pump

; Library Name: spacefiber_pll_lib
; Cell Name: loop_filter
; View Name: schematic
define loop_filter ( Vout  Vout__Vout  gnd ) 
;parameters 
R:R1  Vout N__2 R=R Noise=yes 
C:C2  Vout gnd C=C2 
C:C1  N__2 gnd C=C1 

R=12KOhm
C1=8 pF
C2=1 pF
Short:PinShort__Vout  Vout__Vout Vout Mode=0 SaveCurrent=no
end loop_filter

#uselib "ckt" , "Vf_Pulse"
Vf_Pulse:SRC2  Qa 0 Vpeak=Vdd Vdc=0 Freq=fref Width=D/fref Rise=10 psec Fall=10 psec Delay=0 nsec Weight=0 Harmonics=16 SaveCurrent=1 
NAND_P:NAND2_2  Qa Qa Qa_n Vih=2*Vdd/3 Voh=Vdd Vol=0 
charge_pump:X5  Qa Qa_n Qb Qb_n Vdd N__84 
Tran:Tran1 StartTime=0.0 nsec StopTime=1 usec MaxTimeStep=50 psec LimitStepForTL=yes TimeStepControl=2 TruncTol=7.0 ChargeTol=1.0e-14 IntegMethod=0 MaxGearOrder=2 \
Mu=0.5 MaxOrder=4 Freq[1]=1.0 GHz Order[1]=3 HB_Window=no \
HB_Sol=no ImpApprox=no ShortTL_Delay=1.0 psec ImpMode=1 UseInitCond=no \
LoadGminDC=no CheckKCL=yes CheckOnlyDeltaV=yes OverloadAlert=no DeviceBypass=no \
MaxIters=10 MaxItersDC=200 DevOpPtLevel=0 StatusLevel=2 OutputAllPoints=yes \
NoiseScale=1 ImpEnforcePassivity=yes ImpSkipTotalEnergy=1000 ImpLFEOn=yes \
OutputPlan="Tran1_Output" 

OutputPlan:Tran1_Output \
      Type="Output" \
      UseNodeNestLevel=yes \
      NodeNestLevel=2 \
      UseEquationNestLevel=yes \
      EquationNestLevel=2 \
      UseSavedEquationNestLevel=yes \
      SavedEquationNestLevel=2 \
      UseDeviceCurrentNestLevel=no \
      DeviceCurrentNestLevel=0 \
      DeviceCurrentDeviceType="All" \
      DeviceCurrentSymSyntax=yes \
      UseCurrentNestLevel=yes \
      CurrentNestLevel=999 \
      UseDeviceVoltageNestLevel=no \
      DeviceVoltageNestLevel=0 \
      DeviceVoltageDeviceType="All"

NAND_P:NAND2_1  Qb Qb Qb_n Vih=2*Vdd/3 Voh=Vdd Vol=0 
V_Source:SRC4  Qb 0 Type="V_DC" Vdc=0 SaveCurrent=1 
Short:I_Probe1  N__84 N__83 Mode=0 SaveCurrent=yes 
V_Source:SRC1  Vdd 0 Type="V_DC" Vdc=Vdd SaveCurrent=1 
loop_filter:X6  N__83 Vd 0 

fref=156.25 MHz
Vdd=2.5 V
D=0.15
